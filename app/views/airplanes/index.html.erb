<h1 class="ms-5 mb-3 mt-4 text-center">Available Airplanes in US</h1>

<%= form_with url: airplanes_path, method: :get, class: "d-flex w-25 ms-5 mb-2 " do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control searching-airplanes-btn-focus",
    placeholder: "Find a plane..."
  %>
  <%= submit_tag "Search", class: "btn btn-dark text-light" %>
<% end %>
<%# <%= form_with url: airplanes_path, method: :get, class: "d-flex w-25 ms-5 mb-2 " do %>
  <%# <%= text_field_tag :query,
    params[:query],
    class: "form-control searching-airplanes-btn-focus",
    placeholder: "Find a airplane..."
  %>
  <%# <%= submit_tag "Search", class: "btn btn-primary text-light" %>
<%# <% end %>

<%# col-3 me-lg-4 mb-lg-3 mb-4 d-flex justify-content-center %>
<div class="container d-flex">
  <div class="container">
    <div class="row">
      <% if params[:query].present? %>
        <% @airplanes = Airplane.search_by_make_and_engines(params[:query]) %>
      <% end %>

        <% @airplanes.each do |airplane| %>
          <div class = "col-4 mt-4">
            <div class="d-inline-flex p-2">

          <%= link_to airplane_path(airplane), class: "text-decoration-none" do %>
              <div class="card border-2 ">
                <%# <div class="backgroundEffect">
                </div> %>
                <% if airplane.photos.attached? %>
                  <div class="pic"> <img class="" src='<%= cl_image_path airplane.photos[0].key, height: 350, width: 400, crop: :fill %>' alt="">
                <% end %>
                </div>
                <div class="content" id="test">
                  <p class="h-1 mt-4"> <%= "#{airplane.make} #{airplane.tailnumber}" %></p> <p class="text-muted mt-3"> <%= "#{airplane.description}" %> </p>
                  <div class="d-flex align-items-center justify-content-between mt-3 pb-3">
                    <div class="btn btn-primary">Read More<span class="fas fa-arrow-right"></span>
                    </div>
                  </div>
                </div>
              </div>
          <% end %>
            </div>
        </div>
      <% end %>
    </div>
  </div>
  <div id="map" style="width: 100%; height: 100vh;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAP_BOX_KEY'] %>">
  </div>
</div>
